/*********************************************************************************************
程序名： 　　 无线模块发射端程序（T）
编写人： 　　 杜洋　
编写时间：　　2010年9月2日
硬件支持：　　STC12C5A60S2 外部晶体12MHz
接口说明：　　P1.0接口接无线接收  
修改日志：　　
　　1-								
/*********************************************************************************************
说明：

/*********************************************************************************************/

#include <STC12C5A60S2.H> //单片机头文件

sbit OUT  = P1 ^ 0; 
sbit LED  = P1 ^ 7; //

/*********************************************************************************************
函数名：毫秒级CPU延时函数
调  用：DELAY_MS (?);
参  数：1~65535（参数不可为0）
返回值：无
结  果：占用CPU方式延时与参数数值相同的毫秒时间
备  注：应用于1T单片机时i<600，应用于12T单片机时i<125
/*********************************************************************************************/
void DELAY_MS (unsigned int a){
	unsigned int i;
	while( a-- != 0){
		for(i = 0; i < 600; i++);
	}
}
/*********************************************************************************************/


/**********************************************************************************************/
void ST (void){//开始码
	OUT = 1; //
	DELAY_MS (6);
	OUT = 0; //
	DELAY_MS (4);
}
/**********************************************************************************************/
void BT (bit s){//数据位码
	OUT = 1; 
	DELAY_MS (1);
	OUT = 0; 
	DELAY_MS (1);
	if(s){
		DELAY_MS (1);
	}
}
/**********************************************************************************************/
void MT (unsigned char a){//字节发送
	unsigned char i,n;

	for(i=0;i<8;i++){
		n = a & 0x80;//1000 0000
		a = a << 1;//0000 1010
		if(n == 0x80){
			BT(1);
		}else{
			BT(0);
		}
	}
}
/**********************************************************************************************/
void END (void){//开始码
	MT(0x00); //
}
/**********************************************************************************************/

/*********************************************************************************************
函数名：主函数
调  用：无
参  数：无
返回值：无
结  果：程序开始处，无限循环
备  注：
/**********************************************************************************************/
void main (void){
	while(1){
	
		ST(); // 
		MT(0x93); // 0x05 = 0000 0101
		MT(0x94); // 0x05 = 0000 0101
		MT(0x95); // 0x05 = 0000 0101
		MT(0x96); // 0x05 = 0000 0101
		END(); // 
		LED = ~LED;
		DELAY_MS (1000);
	}
}

/**********************************************************************************************/
