/*********************************************************************************************
程序名： 　　 io口 4种工作模式 - 测试强推挽，高阻，开漏模式
编写人： 　　 　
编写时间：　　
硬件支持：　　STC12C5616AD  12MHz晶振
接口说明：　　led正极接Vcc，负极接P17，手靠近P37，观察led亮度
举例：
MOV P3M0, #10000000B
MOV P3M1, #00000000B 

P3.7 高阻（仅输入）

/*********************************************************************************************/


//#include <REG51.h> //通用89C51头文件
#include <STC12C5620AD.H> // STC12C5616AD 凑合用
//#include <STC12C5A60S2.H> // STC12C5A60S2 系列单片机头文件


sbit P17 = P1^7;
sbit P37 = P3^7;



/*********************************************************************************************
函数名：毫秒级CPU延时函数
调  用：DELAY_MS (?);
参  数：1~65535（参数不可为0）
返回值：无
结  果：占用CPU方式延时与参数数值相同的毫秒时间
备  注：应用于1T单片机时i<600，应用于12T单片机时i<125
/*********************************************************************************************/
void DELAY_MS (unsigned int a){
	unsigned int i;
	while( --a != 0){
		for(i = 0; i < 600; i++);
	}
}
/*********************************************************************************************/



/*********************************************************************************************
函数名：主函数
调  用：无
参  数：无
返回值：无
结  果：程序开始处，无限循环
备  注：
/**********************************************************************************************/
void main (void){
	// P3.7 高阻（仅输入）
	P3M0 = 0x80; // MOV P3M0, #10000000B
	P3M1 = 0x00; // MOV P3M1, #00000000B 
	
	P17 = 1; // led正极接Vcc，负极接P17 
	P37 = 0;
	
	while(1){
		P3M0 = 0x00;
		DELAY_MS(3);
		
		P3M0 = 0x80;
		DELAY_MS(3);

		P17 = ~P37;
		
	}
}


















